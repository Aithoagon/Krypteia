<meta name="copyright"content="Â© 2018 by Claudio Lange. All rights reserved."><meta name="viewport"content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><link rel="icon"href="data:image/png;base64,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"><style>*,body,html{background-color:#333;height:100%;margin:0;overflow:hidden;padding:0;width:100%}#S{background-color:#000}</style><title>Krypteia - for progress of mankind</title><canvas id="S"></canvas><script>parcelRequire=function(t){function e(t,e){if(t in n)return n[t];var a="function"==typeof parcelRequire&&parcelRequire;if(!e&&a)return a(t,!0);if(i)return i(t,!0);if(r&&"string"==typeof t)return r(t);var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}var i="function"==typeof parcelRequire&&parcelRequire,r="function"==typeof require&&require,n={};return e.register=function(t,e){n[t]=e},n=function(t){var e,i,r,n,a,s,o,h,l,u,c,d,f,y,p,v,g,m={};!function(t,e){"object"==typeof m?m=e():"function"==typeof g&&g.amd?g(e):t.Proton=e()}(m,function(){var t=3.1415926,e={PI:t,PIx2:2*t,PI_2:t/2,PI_180:t/180,N180_PI:180/t,randomAToB:function(t,e,i){return i?Math.floor(Math.random()*(e-t))+t:t+Math.random()*(e-t)},randomFloating:function(t,e,i){return this.randomAToB(t-e,t+e,i)},randomZone:function(t){},degreeTransform:function(e){return e*t/180},toColor16:function(t){return"#"+t.toString(16)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)}},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function t(e,i,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,r)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(r):void 0},s=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},h=function(){function t(e,i){r(this,t),this.x=e||0,this.y=i||0}return n(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"getGradient",value:function(){return 0!=this.x?Math.atan2(this.y,this.x):this.y>0?e.PI_2:this.y<0?-e.PI_2:void 0}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)}},{key:"addXY",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"sub",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"divideScalar",value:function(t){return 0!==t?(this.x/=t,this.y/=t):this.set(0,0),this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"negate",value:function(){return this.multiplyScalar(-1)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"rotate",value:function(t){var e=this.x,i=this.y;return this.x=e*Math.cos(t)+i*Math.sin(t),this.y=-e*Math.sin(t)+i*Math.cos(t),this}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"clear",value:function(){return this.x=0,this.y=0,this}},{key:"clone",value:function(){return new t(this.x,this.y)}}]),t}(),l=function(){function t(e,i,n){r(this,t),this.isArray=!1,g.isArray(e)?(this.isArray=!0,this.a=e):(this.a=g.initValue(e,1),this.b=g.initValue(i,this.a),this.center=g.initValue(n,!1))}return n(t,[{key:"getValue",value:function(t){return this.isArray?this.a[Math.floor(this.a.length*Math.random())]:this.center?e.randomFloating(this.a,this.b,t):e.randomAToB(this.a,this.b,t)}}]),t}(),u=function(t){--t;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},c=function(t,e){return[1,0,0,0,1,0,t,e,1]},d=function(t,e){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],o=t[5],h=t[6],l=t[7],u=t[8],c=e[0],d=e[1],f=e[2],y=e[3],p=e[4],v=e[5],g=e[6],m=e[7],b=e[8];return[i*c+r*y+n*g,i*d+r*p+n*m,i*f+r*v+n*b,a*c+s*y+o*g,a*d+s*p+o*m,a*f+s*v+o*b,h*c+l*y+u*g,h*d+l*p+u*m,h*f+l*v+u*b]},f={createCanvas:function(t,e,i,r){var n=document.createElement("canvas");return r=r||"absolute",n.id=t,n.width=e,n.height=i,n.style.opacity=0,n.style.position=r,this.transform(n,-500,-500,0,0),n},createDiv:function(t,e,i){var r=document.createElement("div");return r.id=t,r.style.position="absolute",this.resize(r,e,i),r},resize:function(t,e,i){t.style.width=e+"px",t.style.height=i+"px",t.style.marginLeft=-e/2+"px",t.style.marginTop=-i/2+"px"},transform:function(t,e,i,r,n){var a="translate("+e+"px, "+i+"px) scale("+r+") rotate("+n+"deg)";t.style.willChange="transform",this.css3(t,"transform",a)},transform3d:function(t,e,i,r,n){var a="translate3d("+e+"px, "+i+"px, 0) scale("+r+") rotate("+n+"deg)";t.style.willChange="transform",this.css3(t,"backfaceVisibility","hidden"),this.css3(t,"transform",a)},css3:function(t,e,i){var r=e.charAt(0).toUpperCase()+e.substr(1);t.style["Webkit"+r]=i,t.style["Moz"+r]=i,t.style["O"+r]=i,t.style["ms"+r]=i,t.style[""+e]=i}},y={},p={},v=function(t,e,i){var r="string"==typeof t?t:t.src;if(y[r])e(y[r],i);else{var n=new Image;n.onload=function(t){y[r]=t.target,e(y[r],i)},n.src=r}},g={initValue:function(t,e){return null!=t?t:e},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},destroyArray:function(t){t&&(t.length=0)},destroyObject:function(t,e){for(var i in t)e&&e.indexOf(i)>-1||delete t[i]},classApply:function(t,e){return e?(e=[null].concat(e),new(t.bind.apply(t,e))):new t},setVector2DByObject:function(t,e){this.hasProp(e,"x")&&(t.p.x=e.x),this.hasProp(e,"y")&&(t.p.y=e.y),this.hasProp(e,"vx")&&(t.v.x=e.vx),this.hasProp(e,"vy")&&(t.v.y=e.vy),this.hasProp(e,"ax")&&(t.a.x=e.ax),this.hasProp(e,"ay")&&(t.a.y=e.ay),this.hasProp(e,"p")&&particle.p.copy(e.p),this.hasProp(e,"v")&&particle.v.copy(e.v),this.hasProp(e,"a")&&particle.a.copy(e.a),this.hasProp(e,"position")&&particle.p.copy(e.position),this.hasProp(e,"velocity")&&particle.v.copy(e.velocity),this.hasProp(e,"accelerate")&&particle.a.copy(e.accelerate)},hasProp:function(t,e){return!!t&&void 0!==t[e]},setPrototypeByObject:function(t,e,i){for(var r in e)t.hasOwnProperty(r)&&(i?i.indexOf(r)<0&&(t[r]=this.getSpanValue(e[r])):t[r]=this.getSpanValue(e[r]));return t},setSpanValue:function(t,e,i){return t instanceof l?t:e?i?new l(t,e,i):new l(t,e):new l(t)},getSpanValue:function(t){return t instanceof l?t.getValue():t},getImageData:function(t,e,i){return function(t,e,i){t.drawImage(e,i.x,i.y);var r=t.getImageData(i.x,i.y,i.width,i.height);return t.clearRect(i.x,i.y,i.width,i.height),r}(t,e,i)},destroy:function(t,e){for(var i=t.length;i--;){try{t[i].destroy(e)}catch(t){}delete t[i]}t.length=0}},m={id:0,cache:{},getID:function(t){var e=this.getCacheID(t);return e||(e="PUID_"+this.id++,this.cache[e]=t,e)},getCacheID:function(t){var e=void 0;for(var r in this.cache){if((e=this.cache[r])===t)return r;if("object"===(void 0===e?"undefined":i(e))&&"object"===(void 0===t?"undefined":i(t))&&e.isInner&&t.isInner&&e.src===t.src)return r}return null},getTarget:function(t){return this.cache[t]}},b=function(){function t(e){r(this,t),this.total=0,this.cache={}}return n(t,[{key:"get",value:function(t,e,i){var r=void 0;return i=i||t.__puid||m.getID(t),(r=this.cache[i]&&this.cache[i].length>0?this.cache[i].pop():this.createOrClone(t,e)).__puid=t.__puid||i,r}},{key:"expire",value:function(t){return this.getCache(t.__puid).push(t)}},{key:"createOrClone",value:function(t,e){return this.total++,this.create?this.create(t,e):"function"==typeof t?g.classApply(t,e):t.clone()}},{key:"getCount",value:function(){var t=0;for(var e in this.cache)t+=this.cache[e].length;return t++}},{key:"destroy",value:function(){for(var t in this.cache)this.cache[t].length=0,delete this.cache[t]}},{key:"getCache",value:function(t){return t=t||"default",this.cache[t]||(this.cache[t]=[]),this.cache[t]}}]),t}(),_=function(){function t(e){r(this,t),this.proton=e,this.container=null,this.type=1,this.emitterIndex=0,this.rendererIndex=0}return n(t,[{key:"update",value:function(t,e){this.add(t,e);var i=this.getEmitter(),r=this.getRenderer(),n="";switch(this.type){case 2:n+="emitter:"+this.proton.emitters.length+"<br>",i&&(n+="em speed:"+i.emitSpeed+"<br>"),i&&(n+="pos:"+this.getEmitterPos(i));break;case 3:i&&(n+="initializes:"+i.initializes.length+"<br>"),i&&(n+="<span style='display:inline-block;'>"+this.concatArr(i.initializes)+"</span><br>"),i&&(n+="behaviours:"+i.behaviours.length+"<br>"),i&&(n+="<span style='display:inline-block;'>"+this.concatArr(i.behaviours)+"</span><br>");break;case 4:r&&(n+=r.name+"<br>"),r&&(n+="body:"+this.getCreatedNumber(r)+"<br>");break;default:n+="particles:"+this.proton.getCount()+"<br>",n+="pool:"+this.proton.pool.getCount()+"<br>",n+="total:"+this.proton.pool.total}this.container.innerHTML=n}},{key:"add",value:function(t,e){var i=this;if(!this.container){this.type=1,this.container=document.createElement("div"),this.container.style.cssText=["position:absolute;bottom:0px;left:0;cursor:pointer;","opacity:0.9;z-index:10000;padding:10px;font-size:12px;font-family:Helvetica,Arial,sans-serif;","width:120px;height:50px;background-color:#002;color:#0ff;"].join(""),this.container.addEventListener("click",function(t){++i.type>4&&(i.type=1)},!1);var r=void 0,n=void 0;switch(t){case 2:r="#201",n="#f08";break;case 3:r="#020",n="#0f0";break;default:r="#002",n="#0ff"}this.container.style["background-color"]=r,this.container.style.color=n}this.container.parentNode||(e=e||this.body||document.body).appendChild(this.container)}},{key:"getEmitter",value:function(){return this.proton.emitters[this.emitterIndex]}},{key:"getRenderer",value:function(){return this.proton.renderers[this.rendererIndex]}},{key:"concatArr",value:function(t){var e="";if(!t||!t.length)return e;for(var i=0;i<t.length;i++)e+=(t[i].name||"").substr(0,1)+".";return e}},{key:"getCreatedNumber",value:function(t){return t.pool.total||t.cpool&&t.cpool.total||0}},{key:"getEmitterPos",value:function(t){return Math.round(t.p.x)+","+Math.round(t.p.y)}}]),t}(),x=function(){function t(){r(this,t),this._listeners=null}return n(t,[{key:"addEventListener",value:function(t,e){return this._listeners?this.removeEventListener(t,e):this._listeners={},this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),e}},{key:"removeEventListener",value:function(t,e){if(this._listeners&&this._listeners[t])for(var i=this._listeners[t],r=i.length,n=0;n<r;n++)if(i[n]==e){1==r?delete this._listeners[t]:i.splice(n,1);break}}},{key:"removeAllEventListeners",value:function(t){t?this._listeners&&delete this._listeners[t]:this._listeners=null}},{key:"dispatchEvent",value:function(t,e){var i=!1,r=this._listeners;if(t&&r){var n=r[t];if(!n)return i;for(var a=void 0,s=n.length;s--;)a=n[s],i=i||a(e)}return!!i}},{key:"hasEventListener",value:function(t){var e=this._listeners;return!(!e||!e[t])}}],[{key:"bind",value:function(e){e.prototype.dispatchEvent=t.prototype.dispatchEvent,e.prototype.hasEventListener=t.prototype.hasEventListener,e.prototype.addEventListener=t.prototype.addEventListener,e.prototype.removeEventListener=t.prototype.removeEventListener,e.prototype.removeAllEventListeners=t.prototype.removeAllEventListeners}}]),t}(),k=function(){function t(e){r(this,t),this.type=e}return n(t,[{key:"calculate",value:function(t,e,i){this.eulerIntegrate(t,e,i)}},{key:"eulerIntegrate",value:function(t,e,i){t.sleep||(t.old.p.copy(t.p),t.old.v.copy(t.v),t.a.multiplyScalar(1/t.mass),t.v.add(t.a.multiplyScalar(e)),t.p.add(t.old.v.multiplyScalar(e)),i&&t.v.multiplyScalar(i),t.a.clear())}}]),t}(),P=function(){function t(e){r(this,t),this.emitters=[],this.renderers=[],this.time=0,this.oldTime=0,this.elapsed=0,this.stats=new _(this),this.pool=new b(80),this.integrationType=g.initValue(e,t.EULER),this.integrator=new k(this.integrationType)}return n(t,[{key:"addRenderer",value:function(t){t.init(this),this.renderers.push(t)}},{key:"removeRenderer",value:function(t){var e=this.renderers.indexOf(t);this.renderers.splice(e,1),t.remove(this)}},{key:"addEmitter",value:function(e){this.emitters.push(e),e.parent=this,this.dispatchEvent(t.EMITTER_ADDED,e)}},{key:"removeEmitter",value:function(e){var i=this.emitters.indexOf(e);this.emitters.splice(i,1),e.parent=null,this.dispatchEvent(t.EMITTER_REMOVED,e)}},{key:"update",value:function(){if(this.dispatchEvent(t.PROTON_UPDATE),t.USE_CLOCK){this.oldTime||(this.oldTime=(new Date).getTime());var e=(new Date).getTime();this.elapsed=(e-this.oldTime)/1e3,t.amendChangeTabsBug&&this.amendChangeTabsBug(),this.oldTime=e}else this.elapsed=.0167;this.elapsed>0&&this.emittersUpdate(this.elapsed),this.dispatchEvent(t.PROTON_UPDATE_AFTER)}},{key:"emittersUpdate",value:function(t){for(var e=this.emitters.length;e--;)this.emitters[e].update(t)}},{key:"amendChangeTabsBug",value:function(){this.elapsed>.5&&(this.oldTime=(new Date).getTime(),this.elapsed=0)}},{key:"getCount",value:function(){for(var t=0,e=this.emitters.length;e--;)t+=this.emitters[e].particles.length;return t}},{key:"getAllParticles",value:function(){for(var t=[],e=this.emitters.length;e--;)t=t.concat(this.emitters[e].particles);return t}},{key:"destroy",value:function(){g.destroy(this.renderers,this.getAllParticles()),g.destroy(this.emitters),this.time=0,this.oldTime=0,this.pool.destroy()}}]),t}();P.USE_CLOCK=!1,P.MEASURE=100,P.EULER="euler",P.RK2="runge-kutta2",P.PARTICLE_CREATED="PARTICLE_CREATED",P.PARTICLE_UPDATE="PARTICLE_UPDATE",P.PARTICLE_SLEEP="PARTICLE_SLEEP",P.PARTICLE_DEAD="PARTICLE_DEAD",P.PROTON_UPDATE="PROTON_UPDATE",P.PROTON_UPDATE_AFTER="PROTON_UPDATE_AFTER",P.EMITTER_ADDED="EMITTER_ADDED",P.EMITTER_REMOVED="EMITTER_REMOVED",P.amendChangeTabsBug=!0,x.bind(P);var E={easeLinear:function(t){return t},easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInSine:function(t){return 1-Math.cos(t*e.PI_2)},easeOutSine:function(t){return Math.sin(t*e.PI_2)},easeInOutSine:function(t){return-.5*(Math.cos(e.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInBack:function(t){return t*t*(2.70158*t-1.70158)},easeOutBack:function(t){return(t-=1)*t*(2.70158*t+1.70158)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},getEasing:function(t){return"function"==typeof t?t:this[t]||this.easeLinear}},T=function(){function t(e){r(this,t),this.id="D"+t.ID++,this.reset("init"),e&&g.setPrototypeByObject(this,e)}return n(t,[{key:"getDirection",value:function(){return Math.atan2(this.v.x,-this.v.y)*e.N180_PI}},{key:"reset",value:function(t){return this.life=1/0,this.age=0,this.energy=1,this.dead=!1,this.sleep=!1,this.body=null,this.sprite=null,this.parent=null,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.rotation=0,this.color=null,this.easing=E.easeLinear,"init"==t?(this.transform={},this.p=new h,this.v=new h,this.a=new h,this.old={p:new h,v:new h,a:new h},this.behaviours=[]):(g.destroyObject(this.transform,"rgb"),this.p.set(0,0),this.v.set(0,0),this.a.set(0,0),this.old.p.set(0,0),this.old.v.set(0,0),this.old.a.set(0,0),this.removeAllBehaviours()),this.transform.rgb?(this.transform.rgb.r=255,this.transform.rgb.g=255,this.transform.rgb.b=255):this.transform.rgb={r:255,g:255,b:255},this}},{key:"update",value:function(t,e){if(this.sleep||(this.age+=t,this.applyBehaviours(t,e)),this.age<this.life){var i=this.easing(this.age/this.life);this.energy=Math.max(1-i,0)}else this.destroy()}},{key:"applyBehaviours",value:function(t,e){var i=this.behaviours.length,r=void 0;for(r=0;r<i;r++)this.behaviours[r]&&this.behaviours[r].applyBehaviour(this,t,e)}},{key:"addBehaviour",value:function(t){this.behaviours.push(t),t.hasOwnProperty("parents")&&t.parents.push(this),t.initialize(this)}},{key:"addBehaviours",value:function(t){var e=t.length,i=void 0;for(i=0;i<e;i++)this.addBehaviour(t[i])}},{key:"removeBehaviour",value:function(t){var e=this.behaviours.indexOf(t);e>-1&&(this.behaviours.splice(e,1).parents=null)}},{key:"removeAllBehaviours",value:function(){g.destroyArray(this.behaviours)}},{key:"destroy",value:function(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}}]),t}();T.ID=0;var w={hexToRGB:function(t){var e="#"==t.charAt(0)?t.substring(1,7):t;return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},rgbToHex:function(t){return"rgb("+t.r+", "+t.g+", "+t.b+")"},getHex16FromParticle:function(t){return 65536*Number(t.transform.rgb.r)+256*Number(t.transform.rgb.g)+Number(t.transform.rgb.b)}},A=function(){function t(e,i){r(this,t),this.r=Math.abs(e)||0,this.tha=i||0}return n(t,[{key:"set",value:function(t,e){return this.r=t,this.tha=e,this}},{key:"setR",value:function(t){return this.r=t,this}},{key:"setTha",value:function(t){return this.tha=t,this}},{key:"copy",value:function(t){return this.r=t.r,this.tha=t.tha,this}},{key:"toVector",value:function(){return new h(this.getX(),this.getY())}},{key:"getX",value:function(){return this.r*Math.sin(this.tha)}},{key:"getY",value:function(){return-this.r*Math.cos(this.tha)}},{key:"normalize",value:function(){return this.r=1,this}},{key:"equals",value:function(t){return t.r===this.r&&t.tha===this.tha}},{key:"clear",value:function(){return this.r=0,this.tha=0,this}},{key:"clone",value:function(){return new t(this.r,this.tha)}}]),t}(),R={create:function(t){var e=new Float32Array(9);return t&&this.set(t,e),e},set:function(t,e){for(var i=0;i<9;i++)e[i]=t[i];return e},multiply:function(t,e,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],h=t[6],l=t[7],u=e[0],c=e[1],d=e[2],f=e[3],y=e[4],p=e[6],v=e[7];return i[0]=u*r+c*s,i[1]=u*n+c*o,i[2]=a*d,i[3]=f*r+y*s,i[4]=f*n+y*o,i[6]=p*r+v*s+h,i[7]=p*n+v*o+l,i},inverse:function(t,e){var i,r=t[0],n=t[1],a=t[3],s=t[4],o=t[6],h=t[7],l=s,u=-a,c=h*a-s*o;return i=1/(r*l+n*u),e[0]=l*i,e[1]=-n*i,e[3]=u*i,e[4]=r*i,e[6]=c*i,e[7]=(-h*r+n*o)*i,e},multiplyVec2:function(t,e,i){var r=e[0],n=e[1];return i[0]=r*t[0]+n*t[3]+t[6],i[1]=r*t[1]+n*t[4]+t[7],i}},O=function(t){function i(t){r(this,i);var e=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e._arr=g.isArray(t)?t:[t],e}return s(i,l),n(i,[{key:"getValue",value:function(){var t=this._arr[Math.floor(this._arr.length*Math.random())];return"random"===t||"Random"===t?e.randomColor():t}}],[{key:"createArraySpan",value:function(t){return t?t instanceof i?t:new i(t):null}}]),i}(),C=function(){function t(e,i,n,a){r(this,t),this.x=e,this.y=i,this.width=n,this.height=a,this.bottom=this.y+this.height,this.right=this.x+this.width}return n(t,[{key:"contains",value:function(t,e){return t<=this.right&&t>=this.x&&e<=this.bottom&&e>=this.y}}]),t}(),S=function(){function t(e,i){r(this,t),this.numPan=g.setSpanValue(g.initValue(e,1)),this.timePan=g.setSpanValue(g.initValue(i,1)),this.startTime=0,this.nextTime=0,this.init()}return n(t,[{key:"init",value:function(){this.startTime=0,this.nextTime=this.timePan.getValue()}},{key:"getValue",value:function(t){return this.startTime+=t,this.startTime>=this.nextTime?(this.startTime=0,this.nextTime=this.timePan.getValue(),1==this.numPan.b?this.numPan.getValue(!1)>.5?1:0:this.numPan.getValue(!0)):0}}]),t}(),I=function(){function t(){r(this,t)}return n(t,[{key:"reset",value:function(){}},{key:"init",value:function(t,e){e?this.initialize(e):this.initialize(t)}},{key:"initialize",value:function(t){}}]),t}(),D=function(t){function e(t,i,n){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.lifePan=g.setSpanValue(t,i,n),a.name="Life",a}return s(e,I),n(e,[{key:"initialize",value:function(t){this.lifePan.a==1/0?t.life=1/0:t.life=this.lifePan.getValue()}}]),e}(),B=function(){function t(){r(this,t),this.vector=new h(0,0),this.random=0,this.crossType="dead",this.alert=!0}return n(t,[{key:"getPosition",value:function(){}},{key:"crossing",value:function(t){}}]),t}(),M=function(t){function e(t,i){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.x=t,n.y=i,n}return s(e,B),n(e,[{key:"getPosition",value:function(){return this.vector.x=this.x,this.vector.y=this.y,this.vector}},{key:"crossing",value:function(t){this.alert&&(alert("Sorry PointZone does not support crossing method"),this.alert=!1)}}]),e}(),V=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.zone=g.initValue(t,new M),i.name="Position",i}return s(e,I),n(e,[{key:"reset",value:function(t){this.zone=g.initValue(t,new M)}},{key:"initialize",value:function(t){this.zone.getPosition(),t.p.x=this.zone.vector.x,t.p.y=this.zone.vector.y}}]),e}(),L=function(t){function i(t,e,n){r(this,i);var a=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.rPan=g.setSpanValue(t),a.thaPan=g.setSpanValue(e),a.type=g.initValue(n,"vector"),a.name="Velocity",a}return s(i,I),n(i,[{key:"reset",value:function(t,e,i){this.rPan=g.setSpanValue(t),this.thaPan=g.setSpanValue(e),this.type=g.initValue(i,"vector")}},{key:"normalizeVelocity",value:function(t){return t*P.MEASURE}},{key:"initialize",value:function(t){if("p"==this.type||"P"==this.type||"polar"==this.type){var i=new A(this.normalizeVelocity(this.rPan.getValue()),this.thaPan.getValue()*e.PI_180);t.v.x=i.getX(),t.v.y=i.getY()}else t.v.x=this.normalizeVelocity(this.rPan.getValue()),t.v.y=this.normalizeVelocity(this.thaPan.getValue())}}]),i}(),U=function(t){function e(t,i,n){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.massPan=g.setSpanValue(t,i,n),a.name="Mass",a}return s(e,I),n(e,[{key:"initialize",value:function(t){t.mass=this.massPan.getValue()}}]),e}(),F=function(t){function e(t,i,n){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.radius=g.setSpanValue(t,i,n),a.name="Radius",a}return s(e,I),n(e,[{key:"reset",value:function(t,e,i){this.radius=g.setSpanValue(t,e,i)}},{key:"initialize",value:function(t){t.radius=this.radius.getValue(),t.transform.oldRadius=t.radius}}]),e}(),z=function(t){function e(t,i,n){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.image=a.setSpanValue(t),a.w=g.initValue(i,20),a.h=g.initValue(n,a.w),a.name="Body",a}return s(e,I),n(e,[{key:"initialize",value:function(t){var e=this.image.getValue();t.body="string"==typeof e?{width:this.w,height:this.h,src:e,isInner:!0,inner:!0}:e}},{key:"setSpanValue",value:function(t){return t instanceof O?t:new O(t)}}]),e}(),j=function(){function t(e,i){r(this,t),this.life=g.initValue(e,1/0),this.easing=E.getEasing(i),this.age=0,this.energy=1,this.dead=!1,this.parents=[],this.id="g"+t.id++,this.name="Behaviour"}return n(t,[{key:"reset",value:function(t,e){this.life=g.initValue(t,1/0),this.easing=E.getEasing(e)}},{key:"normalizeForce",value:function(t){return t.multiplyScalar(P.MEASURE)}},{key:"normalizeValue",value:function(t){return t*P.MEASURE}},{key:"initialize",value:function(t){}},{key:"calculate",value:function(t,e,i){if(this.age+=e,this.age>=this.life||this.dead)this.energy=0,this.dead=!0,this.destroy();else{var r=this.easing(t.age/t.life);this.energy=Math.max(1-r,0)}}},{key:"destroy",value:function(){for(var t=this.parents.length;t--;)this.parents[t].removeBehaviour(this);this.parents.length=0}}]),t}();j.id=0;var H=function(t){function e(t,i,n,a){r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,a));return s.force=s.normalizeForce(new h(t,i)),s.name="Force",s}return s(e,j),n(e,[{key:"reset",value:function(t,i,r,n){this.force=this.normalizeForce(new h(t,i)),r&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this,r,n)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.a.add(this.force)}}]),e}(),N=function(t){function e(t,i,n,a,s){r(this,e);var l=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,s));return l.targetPosition=g.initValue(t,new h),l.radius=g.initValue(n,1e3),l.force=g.initValue(l.normalizeValue(i),100),l.radiusSq=l.radius*l.radius,l.attractionForce=new h,l.lengthSq=0,l.name="Attraction",l}return s(e,j),n(e,[{key:"reset",value:function(t,i,r,n,s){this.targetPosition=g.initValue(t,new h),this.radius=g.initValue(r,1e3),this.force=g.initValue(this.normalizeValue(i),100),this.radiusSq=this.radius*this.radius,this.attractionForce=new h,this.lengthSq=0,n&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this,n,s)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(t.p),this.lengthSq=this.attractionForce.lengthSq(),this.lengthSq>4e-6&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.multiplyScalar(1-this.lengthSq/this.radiusSq),this.attractionForce.multiplyScalar(this.force),t.a.add(this.attractionForce))}}]),e}(),q=function(t){function i(t,e,n,a,s){r(this,i);var h=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,a,s));return h.reset(t,e,n),h.time=0,h.name="RandomDrift",h}return s(i,j),n(i,[{key:"reset",value:function(t,e,r,n,s){this.panFoce=new h(t,e),this.panFoce=this.normalizeForce(this.panFoce),this.delay=r,n&&a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"reset",this).call(this,n,s)}},{key:"applyBehaviour",value:function(t,i,r){this.calculate(t,i,r),this.time+=i,this.time>=this.delay&&(t.a.addXY(e.randomAToB(-this.panFoce.x,this.panFoce.x),e.randomAToB(-this.panFoce.y,this.panFoce.y)),this.time=0)}}]),i}(),X=function(t){function e(t,i,n){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,0,t,i,n));return a.name="Gravity",a}return s(e,H),n(e,[{key:"reset",value:function(t,i,r){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this,0,t,i,r)}}]),e}(),G=function(t){function e(t,i,n,a,s){r(this,e);var h=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,s));return h.reset(t,i,n),h.name="Collision",h}return s(e,j),n(e,[{key:"reset",value:function(t,i,r,n,s){this.emitter=g.initValue(t,null),this.mass=g.initValue(i,!0),this.callback=g.initValue(r,null),this.collisionPool=[],this.delta=new h,n&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this,n,s)}},{key:"applyBehaviour",value:function(t,e,i){var r=this.emitter?this.emitter.particles.slice(i):this.pool.slice(i),n=r.length,a=void 0,s=void 0,o=void 0,h=void 0,l=void 0,u=void 0,c=void 0;for(c=0;c<n;c++)if((a=r[c])!==t){this.delta.copy(a.p),this.delta.sub(t.p),s=this.delta.lengthSq();var d=t.radius+a.radius;s<=d*d&&(o=d-Math.sqrt(s),o+=.5,h=t.mass+a.mass,l=this.mass?a.mass/h:.5,u=this.mass?t.mass/h:.5,t.p.add(this.delta.clone().normalize().multiplyScalar(o*-l)),a.p.add(this.delta.normalize().multiplyScalar(o*u)),this.callback&&this.callback(t,a))}}}]),e}(),Y=function(t){function e(t,i,n,a){r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,a));return s.reset(t,i),s.name="CrossZone",s}return s(e,j),n(e,[{key:"reset",value:function(t,i,r,n){this.zone=t,this.zone.crossType=g.initValue(i,"dead"),r&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this,r,n)}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.zone.crossing(t)}}]),e}(),W=function(t){function e(t,i,n,a){r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,a));return s.reset(t,i),s.name="Alpha",s}return s(e,j),n(e,[{key:"reset",value:function(t,i,r,n){this.same=null==i,this.a=g.setSpanValue(g.initValue(t,1)),this.b=g.setSpanValue(i),r&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this,r,n)}},{key:"initialize",value:function(t){t.transform.alphaA=this.a.getValue(),this.same?t.transform.alphaB=t.transform.alphaA:t.transform.alphaB=this.b.getValue()}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.alpha=t.transform.alphaB+(t.transform.alphaA-t.transform.alphaB)*this.energy,t.alpha<.001&&(t.alpha=0)}}]),e}(),Z=function(t){function e(t,i,n,a){r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,a));return s.reset(t,i),s.name="Scale",s}return s(e,j),n(e,[{key:"reset",value:function(t,i,r,n){this.same=null==i,this.a=g.setSpanValue(g.initValue(t,1)),this.b=g.setSpanValue(i),r&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this,r,n)}},{key:"initialize",value:function(t){t.transform.scaleA=this.a.getValue(),t.transform.oldRadius=t.radius,t.transform.scaleB=this.same?t.transform.scaleA:this.b.getValue()}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),t.scale=t.transform.scaleB+(t.transform.scaleA-t.transform.scaleB)*this.energy,t.scale<1e-4&&(t.scale=0),t.radius=t.transform.oldRadius*t.scale}}]),e}(),Q=function(t){function e(t,i,n,a,s){r(this,e);var h=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,s));return h.reset(t,i,n),h.name="Rotate",h}return s(e,j),n(e,[{key:"reset",value:function(t,i,r,n,s){this.same=null==i,this.a=g.setSpanValue(g.initValue(t,"Velocity")),this.b=g.setSpanValue(g.initValue(i,0)),this.style=g.initValue(r,"to"),n&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this,n,s)}},{key:"initialize",value:function(t){t.rotation=this.a.getValue(),t.transform.rotationA=this.a.getValue(),this.same||(t.transform.rotationB=this.b.getValue())}},{key:"applyBehaviour",value:function(t,e,i){this.calculate(t,e,i),this.same?"V"!=this.a.a&&"Velocity"!=this.a.a&&"v"!=this.a.a||(t.rotation=t.getDirection()):"to"==this.style||"TO"==this.style||"_"==this.style?t.rotation+=t.transform.rotationB+(t.transform.rotationA-t.transform.rotationB)*this.energy:t.rotation+=t.transform.rotationB}}]),e}(),K=function(t){function e(t,i,n,a){r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,a));return s.reset(t,i),s.name="Color",s}return s(e,j),n(e,[{key:"reset",value:function(t,i,r,n){this.a=O.createArraySpan(t),this.b=O.createArraySpan(i),r&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this,r,n)}},{key:"initialize",value:function(t){t.color=this.a.getValue(),t.transform.colorA=w.hexToRGB(t.color),this.b&&(t.transform.colorB=w.hexToRGB(this.b.getValue()))}},{key:"applyBehaviour",value:function(t,e,i){
this.b?(this.calculate(t,e,i),t.transform.rgb.r=t.transform.colorB.r+(t.transform.colorA.r-t.transform.colorB.r)*this.energy,t.transform.rgb.g=t.transform.colorB.g+(t.transform.colorA.g-t.transform.colorB.g)*this.energy,t.transform.rgb.b=t.transform.colorB.b+(t.transform.colorA.b-t.transform.colorB.b)*this.energy,t.transform.rgb.r=Math.floor(t.transform.rgb.r),t.transform.rgb.g=Math.floor(t.transform.rgb.g),t.transform.rgb.b=Math.floor(t.transform.rgb.b)):(t.transform.rgb.r=t.transform.colorA.r,t.transform.rgb.g=t.transform.colorA.g,t.transform.rgb.b=t.transform.colorA.b)}}]),e}(),J=function(t){function e(t,i,n,a,s){r(this,e);var h=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,a,s));return h.force*=-1,h.name="Repulsion",h}return s(e,N),n(e,[{key:"reset",value:function(t,i,r,n,s){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this,t,i,r,n,s),this.force*=-1}}]),e}(),$=function(t){function e(t,i,n,a){r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,a));return s.distanceVec=new h,s.centerPoint=g.initValue(t,new h),s.force=g.initValue(s.normalizeValue(i),100),s.name="GravityWell",s}return s(e,j),n(e,[{key:"reset",value:function(t,i,r,n){this.distanceVec=new h,this.centerPoint=g.initValue(t,new h),this.force=g.initValue(this.normalizeValue(i),100),r&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this,r,n)}},{key:"initialize",value:function(t){}},{key:"applyBehaviour",value:function(t,e,i){this.distanceVec.set(this.centerPoint.x-t.p.x,this.centerPoint.y-t.p.y);var r=this.distanceVec.lengthSq();if(0!=r){var n=this.distanceVec.length(),a=this.force*e/(r*n);t.v.x+=a*this.distanceVec.x,t.v.y+=a*this.distanceVec.y}}}]),e}(),tt={initialize:function(t,e,i){var r=i.length,n=void 0;for(n=0;n<r;n++)i[n]instanceof I?i[n].init(t,e):this.init(t,e,i[n]);this.bindEmitter(t,e)},init:function(t,e,i){g.setPrototypeByObject(e,i),g.setVector2DByObject(e,i)},bindEmitter:function(t,i){t.bindEmitter&&(i.p.add(t.p),i.v.add(t.v),i.a.add(t.a),i.v.rotate(e.degreeTransform(t.rotation)))}},et=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.initializes=[],i.particles=[],i.behaviours=[],i.emitSpeed=0,i.emitTime=0,i.totalTime=-1,i.damping=.006,i.bindEmitter=!0,i.rate=new S(1,.1),i.id="p"+e.ID++,i.name="Emitter",i}return s(e,T),n(e,[{key:"emit",value:function(t,e){this.stoped=!1,this.emitTime=0,this.totalTime=g.initValue(t,1/0),1==e||"life"==e||"destroy"==e?this.life="once"==t?1:this.totalTime:isNaN(e)||(this.life=e),this.rate.init()}},{key:"stop",value:function(){this.totalTime=-1,this.emitTime=0,this.stoped=!0}},{key:"preEmit",value:function(t){var e=this.stoped,i=this.emitTime,r=this.totalTime;for(this.stoped=!1,this.emitTime=0,this.totalTime=t,this.rate.init();t>.0167;)t-=.0167,this.update(.0167);this.stoped=e,this.emitTime=i+Math.max(t,0),this.totalTime=r}},{key:"removeAllParticles",value:function(){for(var t=this.particles.length;t--;)this.particles[t].dead=!0}},{key:"addSelfInitialize",value:function(t){t.init?t.init(this):this.initAll()}},{key:"addInitialize",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var r=e.length;r--;)this.initializes.push(e[r])}},{key:"removeInitialize",value:function(t){var e=this.initializes.indexOf(t);e>-1&&this.initializes.splice(e,1)}},{key:"removeAllInitializers",value:function(){g.destroyArray(this.initializes)}},{key:"addBehaviour",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var r=arguments.length;r--;){var n=e[r];this.behaviours.push(n),n.parents&&n.parents.push(this)}}},{key:"removeBehaviour",value:function(t){var e=this.behaviours.indexOf(t);return this.behaviours.splice(e,1),t.parents&&(e=t.parents.indexOf(t),t.parents.splice(e,1)),e}},{key:"removeAllBehaviours",value:function(){g.destroyArray(this.behaviours)}},{key:"update",value:function(t){this.age+=t,(this.age>=this.life||this.dead)&&this.destroy(),this.emitting(t),this.integrate(t)}},{key:"integrate",value:function(t){if(this.parent){var e=1-this.damping;this.parent.integrator.calculate(this,t,e);var i=void 0,r=void 0;for(i=this.particles.length-1;i>=0;i--)(r=this.particles[i]).update(t,i),this.parent.integrator.calculate(r,t,e),this.dispatch("PARTICLE_UPDATE",r),r.dead&&(this.dispatch("PARTICLE_DEAD",r),this.parent.pool.expire(r),this.particles.splice(i,1))}}},{key:"dispatch",value:function(t,e){this.parent&&this.parent.dispatchEvent(t,e),this.bindEvent&&this.dispatchEvent(t,e)}},{key:"emitting",value:function(t){if("once"==this.totalTime){var e=void 0,i=this.rate.getValue(99999);for(i>0&&(this.emitSpeed=i),e=0;e<i;e++)this.createParticle();this.totalTime="none"}else if(this.emitTime+=t,this.emitTime<this.totalTime){var r=this.rate.getValue(t),n=void 0;for(r>0&&(this.emitSpeed=r),n=0;n<r;n++)this.createParticle()}}},{key:"createParticle",value:function(t,e){var i=this.parent.pool.get(T);return this.setupParticle(i,t,e),this.dispatch("PARTICLE_CREATED",i),i}},{key:"setupParticle",value:function(t,e,i){var r=this.initializes,n=this.behaviours;e&&(r=g.isArray(e)?e:[e]),i&&(i=g.isArray(i)?i:[i]),t.reset(),tt.initialize(this,t,r),t.addBehaviours(n),t.parent=this,this.particles.push(t)}},{key:"remove",value:function(){this.stop(),g.destroy(this.particles)}},{key:"destroy",value:function(t){this.dead=!0,this.remove(),this.removeAllInitializers(),this.removeAllBehaviours(),this.parent&&this.parent.removeEmitter(this)}}]),e}();et.ID=0,x.bind(et);var it=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.selfBehaviours=[],i}return s(e,et),n(e,[{key:"addSelfBehaviour",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var r=e.length,n=void 0;for(n=0;n<r;n++)this.selfBehaviours.push(e[n])}},{key:"removeSelfBehaviour",value:function(t){var e=this.selfBehaviours.indexOf(t);e>-1&&this.selfBehaviours.splice(e,1)}},{key:"update",value:function(t){if(a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),!this.sleep){var i=this.selfBehaviours.length,r=void 0;for(r=0;r<i;r++)this.selfBehaviours[r].applyBehaviour(this,t,r)}}}]),e}(),rt=function(t){function e(t,i,n){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return a.mouseTarget=g.initValue(t,window),a.ease=g.initValue(i,.7),a._allowEmitting=!1,a.initEventHandler(),a}return s(e,et),n(e,[{key:"initEventHandler",value:function(){var t=this;this.mousemoveHandler=function(e){return t.mousemove.call(t,e)},this.mousedownHandler=function(e){return t.mousedown.call(t,e)},this.mouseupHandler=function(e){return t.mouseup.call(t,e)},this.mouseTarget.addEventListener("mousemove",this.mousemoveHandler,!1)}},{key:"emit",value:function(){this._allowEmitting=!0}},{key:"stop",value:function(){this._allowEmitting=!1}},{key:"mousemove",value:function(t){t.layerX||0===t.layerX?(this.p.x+=(t.layerX-this.p.x)*this.ease,this.p.y+=(t.layerY-this.p.y)*this.ease):(t.offsetX||0===t.offsetX)&&(this.p.x+=(t.offsetX-this.p.x)*this.ease,this.p.y+=(t.offsetY-this.p.y)*this.ease),this._allowEmitting&&a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this).call(this,"once")}},{key:"destroy",value:function(){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.mouseTarget.removeEventListener("mousemove",this.mousemoveHandler,!1)}}]),e}(),nt=function(){function t(e,i){r(this,t),this.element=e,this.stroke=i,this.initHandler(),this.circleConf={isCircle:!0},this.pool=new b,this.name="BaseRenderer"}return n(t,[{key:"setStroke",value:function(t,e){t=g.initValue(t,"#000000"),e=g.initValue(e,1),this.stroke={color:t,thinkness:e}}},{key:"initHandler",value:function(){var t=this;this._protonUpdateHandler=function(){t.onProtonUpdate.call(t)},this._protonUpdateAfterHandler=function(){t.onProtonUpdateAfter.call(t)},this._emitterAddedHandler=function(e){t.onEmitterAdded.call(t,e)},this._emitterRemovedHandler=function(e){t.onEmitterRemoved.call(t,e)},this._particleCreatedHandler=function(e){t.onParticleCreated.call(t,e)},this._particleUpdateHandler=function(e){t.onParticleUpdate.call(t,e)},this._particleDeadHandler=function(e){t.onParticleDead.call(t,e)}}},{key:"init",value:function(t){this.parent=t,t.addEventListener("PROTON_UPDATE",this._protonUpdateHandler),t.addEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),t.addEventListener("EMITTER_ADDED",this._emitterAddedHandler),t.addEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),t.addEventListener("PARTICLE_CREATED",this._particleCreatedHandler),t.addEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),t.addEventListener("PARTICLE_DEAD",this._particleDeadHandler)}},{key:"resize",value:function(t,e){}},{key:"remove",value:function(t){this.parent.removeEventListener("PROTON_UPDATE",this._protonUpdateHandler),this.parent.removeEventListener("PROTON_UPDATE_AFTER",this._protonUpdateAfterHandler),this.parent.removeEventListener("EMITTER_ADDED",this._emitterAddedHandler),this.parent.removeEventListener("EMITTER_REMOVED",this._emitterRemovedHandler),this.parent.removeEventListener("PARTICLE_CREATED",this._particleCreatedHandler),this.parent.removeEventListener("PARTICLE_UPDATE",this._particleUpdateHandler),this.parent.removeEventListener("PARTICLE_DEAD",this._particleDeadHandler),this.parent=null}},{key:"destroy",value:function(){this.remove()}},{key:"onProtonUpdate",value:function(){}},{key:"onProtonUpdateAfter",value:function(){}},{key:"onEmitterAdded",value:function(t){}},{key:"onEmitterRemoved",value:function(t){}},{key:"onParticleCreated",value:function(t){}},{key:"onParticleUpdate",value:function(t){}},{key:"onParticleDead",value:function(t){}}]),t}(),at=function(t){function i(t){r(this,i);var e=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return e.stroke=null,e.context=e.element.getContext("2d"),e.bufferCache={},e.name="CanvasRenderer",e}return s(i,nt),n(i,[{key:"resize",value:function(t,e){this.element.width=t,this.element.height=e}},{key:"onProtonUpdate",value:function(){this.context.clearRect(0,0,this.element.width,this.element.height)}},{key:"onParticleCreated",value:function(t){t.body?v(t.body,this.addImg2Body,t):t.color=t.color||"#ff0000"}},{key:"onParticleUpdate",value:function(t){t.body?t.body instanceof Image&&this.drawImage(t):this.drawCircle(t)}},{key:"onParticleDead",value:function(t){t.body=null}},{key:"addImg2Body",value:function(t,e){e.body=t}},{key:"drawImage",value:function(t){var i=t.body.width*t.scale|0,r=t.body.height*t.scale|0,n=t.p.x-i/2,a=t.p.y-r/2;if(t.color){t.transform.buffer||(t.transform.buffer=this.createBuffer(t.body));var s=t.transform.buffer.getContext("2d");s.clearRect(0,0,t.transform.buffer.width,t.transform.buffer.height),s.globalAlpha=t.alpha,s.drawImage(t.body,0,0),s.globalCompositeOperation="source-atop",s.fillStyle=w.rgbToHex(t.transform.rgb),s.fillRect(0,0,t.transform.buffer.width,t.transform.buffer.height),s.globalCompositeOperation="source-over",s.globalAlpha=1,this.context.drawImage(t.transform.buffer,0,0,t.transform.buffer.width,t.transform.buffer.height,n,a,i,r)}else this.context.save(),this.context.globalAlpha=t.alpha,this.context.translate(t.p.x,t.p.y),this.context.rotate(e.degreeTransform(t.rotation)),this.context.translate(-t.p.x,-t.p.y),this.context.drawImage(t.body,0,0,t.body.width,t.body.height,n,a,i,r),this.context.globalAlpha=1,this.context.restore()}},{key:"drawCircle",value:function(t){t.transform.rgb?this.context.fillStyle="rgba("+t.transform.rgb.r+","+t.transform.rgb.g+","+t.transform.rgb.b+","+t.alpha+")":this.context.fillStyle=t.color,this.context.beginPath(),this.context.arc(t.p.x,t.p.y,t.radius,0,2*Math.PI,!0),this.stroke&&(this.context.strokeStyle=this.stroke.color,this.context.lineWidth=this.stroke.thinkness,this.context.stroke()),this.context.closePath(),this.context.fill()}},{key:"createBuffer",value:function(t){if(t instanceof Image){var e=t.width+"_"+t.height,i=this.bufferCache[e];return i||((i=document.createElement("canvas")).width=t.width,i.height=t.height,this.bufferCache[e]=i),i}}}]),i}(),st=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.stroke=null,i.pool.create=function(t,e){return i.createBody(t,e)},i.addImg2Body=i.addImg2Body.bind(i),i.transform3d=!1,i.name="DomRenderer",i}return s(e,nt),n(e,[{key:"onParticleCreated",value:function(t){t.body?v(t.body,this.addImg2Body,t):(t.body=this.pool.get(this.circleConf,t),this.element.appendChild(t.body))}},{key:"onParticleUpdate",value:function(t){this.bodyReady(t)&&(this.transform3d?f.transform3d(t.body,t.p.x,t.p.y,t.scale,t.rotation):f.transform(t.body,t.p.x,t.p.y,t.scale,t.rotation),t.body.style.opacity=t.alpha,t.body.isCircle&&(t.body.style.backgroundColor=t.color||"#ff0000"))}},{key:"onParticleDead",value:function(t){this.bodyReady(t)&&(this.element.removeChild(t.body),this.pool.expire(t.body),t.body=null)}},{key:"bodyReady",value:function(t){return"object"===i(t.body)&&t.body&&!t.body.isInner}},{key:"addImg2Body",value:function(t,e){e.dead||(e.body=this.pool.get(t,e),f.resize(e.body,t.width,t.height),this.element.appendChild(e.body))}},{key:"createBody",value:function(t,e){return t.isCircle?this.createCircle(e):this.createSprite(t,e)}},{key:"createCircle",value:function(t){var e=f.createDiv(t.id+"_dom",2*t.radius,2*t.radius);return e.style.borderRadius=t.radius+"px",this.stroke&&(e.style.borderColor=this.stroke.color,e.style.borderWidth=this.stroke.thinkness+"px"),e.isCircle=!0,e}},{key:"createSprite",value:function(t,e){var i="string"==typeof t?t:t.src,r=f.createDiv(e.id+"_dom",t.width,t.height);return r.style.backgroundImage="url("+i+")",r}}]),e}(),ot=function(t){function e(t,i){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.stroke=i,n.name="EaselRenderer",n}return s(e,nt),n(e,[{key:"onParticleCreated",value:function(t){t.body?this.createSprite(t):this.createCircle(t),this.element.addChild(t.body)}},{key:"onParticleUpdate",value:function(t){t.body&&(t.body.x=t.p.x,t.body.y=t.p.y,t.body.alpha=t.alpha,t.body.scaleX=t.body.scaleY=t.scale,t.body.rotation=t.rotation)}},{key:"onParticleDead",value:function(t){t.body&&(t.body.parent&&t.body.parent.removeChild(t.body),this.pool.expire(t.body),t.body=null),t.graphics&&this.pool.expire(t.graphics)}},{key:"createSprite",value:function(t){t.body=this.pool.get(t.body),t.body.parent||t.body.image&&(t.body.regX=t.body.image.width/2,t.body.regY=t.body.image.height/2)}},{key:"createCircle",value:function(t){var e=this.pool.get(createjs.Graphics);this.stroke&&(this.stroke instanceof String?e.beginStroke(this.stroke):e.beginStroke("#000000")),e.beginFill(t.color||"#ff0000").drawCircle(0,0,t.radius);var i=this.pool.get(createjs.Shape,[e]);t.body=i,t.graphics=e}}]),e}(),ht=function(t){function e(t,i){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.context=n.element.getContext("2d"),n.imageData=null,n.rectangle=null,n.rectangle=i,n.createImageData(i),n.name="PixelRenderer",n}return s(e,nt),n(e,[{key:"resize",value:function(t,e){this.element.width=t,this.element.height=e}},{key:"createImageData",value:function(t){this.rectangle=t||new C(0,0,this.element.width,this.element.height),this.imageData=this.context.createImageData(this.rectangle.width,this.rectangle.height),this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onProtonUpdate",value:function(){this.context.clearRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),this.imageData=this.context.getImageData(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height)}},{key:"onProtonUpdateAfter",value:function(){this.context.putImageData(this.imageData,this.rectangle.x,this.rectangle.y)}},{key:"onParticleCreated",value:function(t){}},{key:"onParticleUpdate",value:function(t){this.imageData&&this.setPixel(this.imageData,Math.floor(t.p.x-this.rectangle.x),Math.floor(t.p.y-this.rectangle.y),t)}},{key:"setPixel",value:function(t,e,i,r){var n=r.transform.rgb;if(!(e<0||e>this.element.width||i<0||i>this.elementwidth)){var a=4*((i>>0)*t.width+(e>>0));t.data[a]=n.r,t.data[a+1]=n.g,t.data[a+2]=n.b,t.data[a+3]=255*r.alpha}}},{key:"onParticleDead",value:function(t){}}]),e}(),lt=function(t){function i(t,e){r(this,i);var n=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n.stroke=e,n.setColor=!1,n.pool.create=function(t,e){return n.createBody(t,e)},n.name="PixiRenderer",n}return s(i,nt),n(i,[{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(t){t.body?t.body=this.pool.get(t.body,t):t.body=this.pool.get(this.circleConf,t),this.element.addChild(t.body)}},{key:"onParticleUpdate",value:function(t){this.transform(t,t.body),this.setColor&&(t.body.tint=w.getHex16FromParticle(t))}},{key:"onParticleDead",value:function(t){this.element.removeChild(t.body),this.pool.expire(t.body),t.body=null}},{key:"destroy",value:function(t){a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this),this.pool.destroy();for(var e=t.length;e--;){var r=t[e];r.body&&this.element.removeChild(r.body)}}},{key:"transform",value:function(t,i){i.x=t.p.x,i.y=t.p.y,i.alpha=t.alpha,i.scale.x=t.scale,i.scale.y=t.scale,i.rotation=t.rotation*e.PI_180}},{key:"createBody",value:function(t,e){return t.isCircle?this.createCircle(e):this.createSprite(t)}},{key:"createSprite",value:function(t){var e=t.isInner?PIXI.Sprite.fromImage(t.src):new PIXI.Sprite(t);return e.anchor.x=.5,e.anchor.y=.5,e}},{key:"createCircle",value:function(t){var e=new PIXI.Graphics;return this.stroke&&(this.stroke instanceof String&&this.stroke,e.beginStroke(this.stroke)),e.beginFill(t.color||36077),e.drawCircle(0,0,t.radius),e.endFill(),e}}]),i}(),ut=function(){function t(){r(this,t),this.mats=[],this.size=0;for(var e=0;e<20;e++)this.mats.push(R.create([0,0,0,0,0,0,0,0,0]))}return n(t,[{key:"set",value:function(t,e){0==e?R.set(t,this.mats[0]):R.multiply(this.mats[e-1],t,this.mats[e]),this.size=Math.max(this.size,e+1)}},{key:"push",value:function(t){0==this.size?R.set(t,this.mats[0]):R.multiply(this.mats[this.size-1],t,this.mats[this.size]),this.size++}},{key:"pop",value:function(){this.size>0&&this.size--}},{key:"top",value:function(){return this.mats[this.size-1]}}]),t}(),ct=function(t){function i(t){r(this,i);var e=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return e.gl=e.element.getContext("experimental-webgl",{antialias:!0,stencil:!1,depth:!1}),e.gl||alert("Sorry your browser do not suppest WebGL!"),e.initVar(),e.setMaxRadius(),e.initShaders(),e.initBuffers(),e.gl.blendEquation(e.gl.FUNC_ADD),e.gl.blendFunc(e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA),e.gl.enable(e.gl.BLEND),e.addImg2Body=e.addImg2Body.bind(e),e.name="WebGLRenderer",e}return s(i,nt),n(i,[{key:"init",value:function(t){a(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"init",this).call(this,t),this.resize(this.element.width,this.element.height)}},{key:"resize",value:function(t,e){this.umat[4]=-2,this.umat[7]=1,this.smat[0]=1/t,this.smat[4]=1/e,this.mstack.set(this.umat,0),this.mstack.set(this.smat,1),this.gl.viewport(0,0,t,e),this.element.width=t,this.element.height=e}},{key:"setMaxRadius",value:function(t){this.circleCanvasURL=this.createCircle(t)}},{key:"getVertexShader",value:function(){return["uniform vec2 viewport;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 tMat;","varying vec2 vTextureCoord;","varying float alpha;","void main() {","vec3 v = tMat * vec3(aVertexPosition, 1.0);","gl_Position = vec4(v.x, v.y, 0, 1);","vTextureCoord = aTextureCoord;","alpha = tMat[0][2];","}"].join("\n")}},{key:"getFragmentShader",value:function(){return["precision mediump float;","varying vec2 vTextureCoord;","varying float alpha;","uniform sampler2D uSampler;","uniform vec4 color;","uniform bool useTexture;","uniform vec3 uColor;","void main() {","vec4 textureColor = texture2D(uSampler, vTextureCoord);","gl_FragColor = textureColor * vec4(uColor, 1.0);","gl_FragColor.w *= alpha;","}"].join("\n")}},{key:"initVar",value:function(){this.mstack=new ut,this.umat=R.create([2,0,1,0,-2,0,-1,1,1]),this.smat=R.create([.01,0,1,0,.01,0,0,0,1]),this.texturebuffers={}}},{key:"blendEquation",value:function(t){this.gl.blendEquation(this.gl[t])}},{key:"blendFunc",value:function(t,e){this.gl.blendFunc(this.gl[t],this.gl[e])}},{key:"getShader",value:function(t,e,i){var r=i?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert(t.getShaderInfoLog(r)),null)}},{key:"initShaders",value:function(){var t=this.getShader(this.gl,this.getFragmentShader(),!0),e=this.getShader(this.gl,this.getVertexShader(),!1);this.sprogram=this.gl.createProgram(),this.gl.attachShader(this.sprogram,e),this.gl.attachShader(this.sprogram,t),this.gl.linkProgram(this.sprogram),this.gl.getProgramParameter(this.sprogram,this.gl.LINK_STATUS)||alert("Could not initialise shaders"),this.gl.useProgram(this.sprogram),this.sprogram.vpa=this.gl.getAttribLocation(this.sprogram,"aVertexPosition"),this.sprogram.tca=this.gl.getAttribLocation(this.sprogram,"aTextureCoord"),this.gl.enableVertexAttribArray(this.sprogram.tca),this.gl.enableVertexAttribArray(this.sprogram.vpa),this.sprogram.tMatUniform=this.gl.getUniformLocation(this.sprogram,"tMat"),this.sprogram.samplerUniform=this.gl.getUniformLocation(this.sprogram,"uSampler"),this.sprogram.useTex=this.gl.getUniformLocation(this.sprogram,"useTexture"),this.sprogram.color=this.gl.getUniformLocation(this.sprogram,"uColor"),this.gl.uniform1i(this.sprogram.useTex,1)}},{key:"initBuffers",value:function(){var t=void 0;this.unitIBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,3,1,0,2,3]),this.gl.STATIC_DRAW);var e=void 0,i=[];for(e=0;e<100;e++)i.push(e);for(t=new Uint16Array(i),this.unitI33=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitI33),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),i=[],e=0;e<100;e++)i.push(e,e+1,e+2);t=new Uint16Array(i),this.stripBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.stripBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"createCircle",value:function(t){this.circleCanvasRadius=u(g.initValue(t,32));var e=f.createCanvas("circle_canvas",2*this.circleCanvasRadius,2*this.circleCanvasRadius),i=e.getContext("2d");return i.beginPath(),i.arc(this.circleCanvasRadius,this.circleCanvasRadius,this.circleCanvasRadius,0,2*Math.PI,!0),i.closePath(),i.fillStyle="#FFF",i.fill(),e.toDataURL()}},{key:"drawImg2Canvas",value:function(t){var e=t.body.width,i=t.body.height,r=u(t.body.width),n=u(t.body.height),a=t.body.width/r,s=t.body.height/n;this.texturebuffers[t.transform.src]||(this.texturebuffers[t.transform.src]=[this.gl.createTexture(),this.gl.createBuffer(),this.gl.createBuffer()]),t.transform.texture=this.texturebuffers[t.transform.src][0],t.transform.vcBuffer=this.texturebuffers[t.transform.src][1],t.transform.tcBuffer=this.texturebuffers[t.transform.src][2],this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.tcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,a,0,0,s,s,s]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.vcBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,e,0,0,i,e,i]),this.gl.STATIC_DRAW);var o=t.transform.canvas.getContext("2d").getImageData(0,0,r,n);this.gl.bindTexture(this.gl.TEXTURE_2D,t.transform.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,o),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_NEAREST),this.gl.generateMipmap(this.gl.TEXTURE_2D),t.transform.textureLoaded=!0,t.transform.textureWidth=e,t.transform.textureHeight=i}},{key:"onProtonUpdate",value:function(){}},{key:"onParticleCreated",value:function(t){t.transform.textureLoaded=!1,t.transform.tmat=R.create(),t.transform.tmat[8]=1,t.transform.imat=R.create(),t.transform.imat[8]=1,t.body?v(t.body,this.addImg2Body,t):(v(this.circleCanvasURL,this.addImg2Body,t),t.transform.oldScale=t.radius/this.circleCanvasRadius)}},{key:"addImg2Body",value:function(t,e){e.dead||(e.body=t,e.transform.src=t.src,e.transform.canvas=function(t,e,i){var r=t.src;if(!p[r]){var n=u(t.width),a=u(t.height),s=f.createCanvas("canvas_cache_0",n,a);s.getContext("2d").drawImage(t,0,0,t.width,t.height),p[r]=s}return e&&e(p[r],void 0),p[r]}(t),e.transform.oldScale=1,this.drawImg2Canvas(e))}},{key:"onParticleUpdate",value:function(t){t.transform.textureLoaded&&(this.updateMatrix(t),this.gl.uniform3f(this.sprogram.color,t.transform.rgb.r/255,t.transform.rgb.g/255,t.transform.rgb.b/255),this.gl.uniformMatrix3fv(this.sprogram.tMatUniform,!1,this.mstack.top()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.vcBuffer),this.gl.vertexAttribPointer(this.sprogram.vpa,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.transform.tcBuffer),this.gl.vertexAttribPointer(this.sprogram.tca,2,this.gl.FLOAT,!1,0,0),this.gl.bindTexture(this.gl.TEXTURE_2D,t.transform.texture),this.gl.uniform1i(this.sprogram.samplerUniform,0),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.unitIBuffer),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0),this.mstack.pop())}},{key:"onParticleDead",value:function(t){}},{key:"updateMatrix",value:function(t){var i=c(-t.transform.textureWidth/2,-t.transform.textureHeight/2),r=c(t.p.x,t.p.y),n=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,-i,0,i,e,0,0,0,1]}(t.rotation*e.PI_180),a=t.scale*t.transform.oldScale,s=function(t,e){return[t,0,0,0,e,0,0,0,1]}(a,a),o=d(i,s);o=d(o,n),o=d(o,r),R.inverse(o,t.transform.imat),o[2]=t.alpha,this.mstack.push(o)}}]),i}(),dt=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.name="CustomRenderer",i}return s(e,nt),e}(),ft=function(t){function i(t,e,n,a,s){r(this,i);var h=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n-t>=0?(h.x1=t,h.y1=e,h.x2=n,h.y2=a):(h.x1=n,h.y1=a,h.x2=t,h.y2=e),h.dx=h.x2-h.x1,h.dy=h.y2-h.y1,h.minx=Math.min(h.x1,h.x2),h.miny=Math.min(h.y1,h.y2),h.maxx=Math.max(h.x1,h.x2),h.maxy=Math.max(h.y1,h.y2),h.dot=h.x2*h.y1-h.x1*h.y2,h.xxyy=h.dx*h.dx+h.dy*h.dy,h.gradient=h.getGradient(),h.length=h.getLength(),h.direction=g.initValue(s,">"),h}return s(i,B),n(i,[{key:"getPosition",value:function(){return this.random=Math.random(),this.vector.x=this.x1+this.random*this.length*Math.cos(this.gradient),this.vector.y=this.y1+this.random*this.length*Math.sin(this.gradient),this.vector}},{key:"getDirection",value:function(t,e){var i=this.dy,r=-this.dx;return(i*t+r*e+this.dot)*(0==r?1:r)>0}},{key:"getDistance",value:function(t,e){return(this.dy*t+-this.dx*e+this.dot)/Math.sqrt(this.xxyy)}},{key:"getSymmetric",value:function(t){var e=t.getGradient(),i=2*(this.getGradient()-e),r=t.x,n=t.y;return t.x=r*Math.cos(i)-n*Math.sin(i),t.y=r*Math.sin(i)+n*Math.cos(i),t}},{key:"getGradient",value:function(){return Math.atan2(this.dy,this.dx)}},{key:"rangeOut",value:function(t){if(Math.abs(this.getGradient())<=e.PI/4){if(t.p.x<=this.maxx&&t.p.x>=this.minx)return!0}else if(t.p.y<=this.maxy&&t.p.y>=this.miny)return!0;return!1}},{key:"getLength",value:function(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)}},{key:"crossing",value:function(t){if("dead"==this.crossType)if(">"==this.direction||"R"==this.direction||"right"==this.direction||"down"==this.direction){if(!this.rangeOut(t))return;this.getDirection(t.p.x,t.p.y)&&(t.dead=!0)}else{if(!this.rangeOut(t))return;this.getDirection(t.p.x,t.p.y)||(t.dead=!0)}else if("bound"==this.crossType){if(!this.rangeOut(t))return;this.getDistance(t.p.x,t.p.y)<=t.radius&&(0==this.dx?t.v.x*=-1:0==this.dy?t.v.y*=-1:this.getSymmetric(t.v))}else"cross"==this.crossType&&this.alert&&(console.error("Sorry lineZone does not support cross method"),this.alert=!1)}}]),i}(),yt=function(t){function i(t,e,n){r(this,i);var a=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.x=t,a.y=e,a.radius=n,a.angle=0,a.center={x:t,y:e},a}return s(i,B),n(i,[{key:"getPosition",value:function(){return this.random=Math.random(),this.angle=e.PIx2*Math.random(),this.vector.x=this.x+this.random*this.radius*Math.cos(this.angle),this.vector.y=this.y+this.random*this.radius*Math.sin(this.angle),this.vector}},{key:"setCenter",value:function(t,e){this.center.x=t,this.center.y=e}},{key:"crossing",value:function(t){var e=t.p.distanceTo(this.center);"dead"==this.crossType?e-t.radius>this.radius&&(t.dead=!0):"bound"==this.crossType?e+t.radius>=this.radius&&this.getSymmetric(t):"cross"==this.crossType&&this.alert&&(alert("Sorry CircleZone does not support cross method"),this.alert=!1)}},{key:"getSymmetric",value:function(t){var e=t.v.getGradient(),i=2*(this.getGradient(t)-e),r=t.v.x,n=t.v.y;t.v.x=r*Math.cos(i)-n*Math.sin(i),t.v.y=r*Math.sin(i)+n*Math.cos(i)}},{key:"getGradient",value:function(t){return-e.PI_2+Math.atan2(t.p.y-this.center.y,t.p.x-this.center.x)}}]),i}(),pt=function(t){function e(t,i,n,a){r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.x=t,s.y=i,s.width=n,s.height=a,s}return s(e,B),n(e,[{key:"getPosition",value:function(){return this.vector.x=this.x+Math.random()*this.width,this.vector.y=this.y+Math.random()*this.height,this.vector}},{key:"crossing",value:function(t){"dead"==this.crossType?(t.p.x+t.radius<this.x?t.dead=!0:t.p.x-t.radius>this.x+this.width&&(t.dead=!0),t.p.y+t.radius<this.y?t.dead=!0:t.p.y-t.radius>this.y+this.height&&(t.dead=!0)):"bound"==this.crossType?(t.p.x-t.radius<this.x?(t.p.x=this.x+t.radius,t.v.x*=-1):t.p.x+t.radius>this.x+this.width&&(t.p.x=this.x+this.width-t.radius,t.v.x*=-1),t.p.y-t.radius<this.y?(t.p.y=this.y+t.radius,t.v.y*=-1):t.p.y+t.radius>this.y+this.height&&(t.p.y=this.y+this.height-t.radius,t.v.y*=-1)):"cross"==this.crossType&&(t.p.x+t.radius<this.x&&t.v.x<=0?t.p.x=this.x+this.width+t.radius:t.p.x-t.radius>this.x+this.width&&t.v.x>=0&&(t.p.x=this.x-t.radius),t.p.y+t.radius<this.y&&t.v.y<=0?t.p.y=this.y+this.height+t.radius:t.p.y-t.radius>this.y+this.height&&t.v.y>=0&&(t.p.y=this.y-t.radius))}}]),e}(),vt=function(t){function e(t,i,n,a){r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.reset(t,i,n,a),s}return s(e,B),n(e,[{key:"reset",value:function(t,e,i,r){this.imageData=t,this.x=g.initValue(e,0),this.y=g.initValue(i,0),this.d=g.initValue(r,2),this.vectors=[],this.setVectors()}},{key:"setVectors",value:function(){var t=void 0,e=void 0,i=this.imageData.width,r=this.imageData.height;for(t=0;t<i;t+=this.d)for(e=0;e<r;e+=this.d){var n=4*((e>>0)*i+(t>>0));this.imageData.data[n+3]>0&&this.vectors.push({x:t+this.x,y:e+this.y})}return this.vector}},{key:"getBound",value:function(t,e){var i=4*((e>>0)*this.imageData.width+(t>>0));return this.imageData.data[i+3]>0}},{key:"getPosition",value:function(){return this.vector.copy(this.vectors[Math.floor(Math.random()*this.vectors.length)])}},{key:"getColor",value:function(t,e){t-=this.x;var i=4*(((e-=this.y)>>0)*this.imageData.width+(t>>0));return{r:this.imageData.data[i],g:this.imageData.data[i+1],b:this.imageData.data[i+2],a:this.imageData.data[i+3]}}},{key:"crossing",value:function(t){"dead"==this.crossType?this.getBound(t.p.x-this.x,t.p.y-this.y)?t.dead=!0:t.dead=!1:"bound"==this.crossType&&(this.getBound(t.p.x-this.x,t.p.y-this.y)||t.v.negate())}}]),e}(),gt={addEventListener:function(t,e){t.addEventListener("PROTON_UPDATE_AFTER",function(){return e()})},getStyle:function(t){
var e=w.hexToRGB(t||"#ff0000");return"rgba("+e.r+", "+e.g+", "+e.b+", 0.5)"},drawZone:function(t,e,i,r){var n=e.getContext("2d"),a=this.getStyle();this.addEventListener(t,function(){r&&n.clearRect(0,0,e.width,e.height),i instanceof M?(n.beginPath(),n.fillStyle=a,n.arc(i.x,i.y,10,0,2*Math.PI,!0),n.fill(),n.closePath()):i instanceof ft?(n.beginPath(),n.strokeStyle=a,n.moveTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.stroke(),n.closePath()):i instanceof pt?(n.beginPath(),n.strokeStyle=a,n.drawRect(i.x,i.y,i.width,i.height),n.stroke(),n.closePath()):i instanceof yt&&(n.beginPath(),n.strokeStyle=a,n.arc(i.x,i.y,i.radius,0,2*Math.PI,!0),n.stroke(),n.closePath())})},drawEmitter:function(t,e,i,r){var n=e.getContext("2d"),a=this.getStyle();this.addEventListener(t,function(){r&&n.clearRect(0,0,e.width,e.height),n.beginPath(),n.fillStyle=a,n.arc(i.p.x,i.p.y,10,0,2*Math.PI,!0),n.fill(),n.closePath()})}};return function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var r=(new Date).getTime(),n=Math.max(0,16-(r-t)),a=window.setTimeout(function(){e(r+n)},n);return t=r+n,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),P.Particle=P.P=T,P.Pool=b,P.Util=g,P.ColorUtil=w,P.MathUtils=e,P.Vector2D=P.Vector=h,P.Polar2D=P.Polar=A,P.ArraySpan=O,P.Rectangle=C,P.Rate=S,P.ease=E,P.Span=l,P.Mat3=R,P.getSpan=function(t,e,i){return new l(t,e,i)},P.createArraySpan=O.createArraySpan,P.Initialize=P.Init=I,P.Life=P.L=D,P.Position=P.P=V,P.Velocity=P.V=L,P.Mass=P.M=U,P.Radius=P.R=F,P.Body=P.B=z,P.Behaviour=j,P.Force=P.F=H,P.Attraction=P.A=N,P.RandomDrift=P.RD=q,P.Gravity=P.G=X,P.Collision=G,P.CrossZone=Y,P.Alpha=P.A=W,P.Scale=P.S=Z,P.Rotate=Q,P.Color=K,P.Repulsion=J,P.GravityWell=$,P.Emitter=et,P.BehaviourEmitter=it,P.FollowEmitter=rt,P.Zone=B,P.LineZone=ft,P.CircleZone=yt,P.PointZone=M,P.RectZone=pt,P.ImageZone=vt,P.CanvasRenderer=at,P.DomRenderer=st,P.EaselRenderer=ot,P.PixiRenderer=lt,P.PixelRenderer=ht,P.WebGLRenderer=P.WebGlRenderer=ct,P.CustomRenderer=dt,P.Debug=gt,Object.assign(P,E),P});var b=function(t){return t&&t.__esModule?{d:t.default}:{d:t}}(m);return y=new b.d,n="",a="",y="",p="",l="","",i=!1,u="",r="",h="",e=function(){return(n=document.getElementById("S")).width=window.innerWidth,n.height=window.innerHeight,a=n.getContext("2d"),s(),v(),n.addEventListener("mousedown",c,!1),n.addEventListener("mouseup",f,!1),n.addEventListener("mousemove",d,!1),window.onresize=function(t){return n.width=window.innerWidth,n.height=window.innerHeight,h.reset(new b.d.RectZone(0,0,n.width,n.height),"cross")}},s=function(){return y=new b.d,(l=new b.d.Emitter).damping=.008,l.rate=new b.d.Rate(250),l.addInitialize(new b.d.Mass(1)),l.addInitialize(new b.d.Radius(4)),l.addInitialize(new b.d.Velocity(new b.d.Span(1.5),new b.d.Span(0,360),"polar")),u={x:501.5,y:305},r=new b.d.Attraction(u,0,0),h=new b.d.CrossZone(new b.d.RectZone(0,0,n.width,n.height),"cross"),l.addBehaviour(new b.d.Color("random")),l.addBehaviour(r,h),l.addBehaviour(new b.d.RandomDrift(10,10,.05)),l.p.x=n.width/2,l.p.y=n.height/2,l.emit("once"),y.addEmitter(l),y.addRenderer(o())},c=function(t){return i=!0,r.reset(u,10,1200),d(t)},d=function(t){var e,r;if(i)return t.layerX||0===t.layerX?(e=t.layerX,r=t.layerY):(t.offsetX||0===t.offsetX)&&(e=t.offsetX,r=t.offsetY),u.x=e,u.y=r},f=function(t){return i=!1,r.reset(u,0,0)},o=function(){return(p=new b.d.CanvasRenderer(n)).onProtonUpdate=function(){return a.fillStyle="rgba(0, 0, 0, 0.02)",a.fillRect(0,0,n.width,n.height)},p.onParticleUpdate=function(t){return a.beginPath(),a.strokeStyle=t.color,a.lineWidth=1,a.moveTo(t.old.p.x,t.old.p.y),a.lineTo(t.p.x,t.p.y),a.closePath(),a.stroke()},p},v=function(){return requestAnimationFrame(v),y.update()},e(),{e9ML:{}}}(e),e.modules=n,e}();</script>